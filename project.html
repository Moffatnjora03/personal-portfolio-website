<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Projects — Moffa</title>
  <style>
    body {margin:0;font-family:Arial,Helvetica,sans-serif;background:#0b0b0b;color:#eee}
    header {padding:40px;text-align:center}
    h1 {font-size:2.5rem;letter-spacing:2px}
    .filters {display:flex;justify-content:center;gap:12px;margin-bottom:30px;flex-wrap:wrap}
    .filters button {background:#111;border:1px solid #333;color:#eee;padding:10px 18px;cursor:pointer}
    .filters button.active {background:#c9a24d;color:#000;border-color:#c9a24d}
    .grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px;padding:0 40px 60px}
    .project {background:#111;border-radius:14px;overflow:hidden;cursor:pointer;transition:transform .3s}
    .project:hover {transform:translateY(-6px)}
    .project img {width:100%;height:200px;object-fit:cover}
    .project .info {padding:16px}
    .project h3 {margin:0 0 6px;font-size:1.1rem}
    .project p {margin:0;font-size:.9rem;color:#aaa}
    .project span {font-size:.75rem;color:#c9a24d}
    .modal {position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;z-index:10}
    .modal.active {display:flex}
    .modal-content {max-width:90%;max-height:90%;text-align:center}
    .modal-content img {max-width:100%;max-height:70vh;border-radius:10px}
    .modal-content h2 {margin:20px 0 6px}
    .modal-content p {margin:0;color:#aaa}
    a.back {display:block;text-align:center;color:#c9a24d;text-decoration:none;margin-bottom:20px}
  </style>
</head>
<body>
<header>
  <h1>Projects</h1>
  <p>A growing archive of my creative career</p>
</header>
<a class="back" href="index.html">← Back to Home</a>
<div class="filters">
  <button class="active" data-filter="all">All</button>
  <button data-filter="poster">Posters</button>
  <button data-filter="branding">Branding</button>
  <button data-filter="social">Social Media</button>
</div>
<section class="grid" id="projectGrid"></section>
<div class="modal" id="modal">
  <div class="modal-content">
    <img id="modalImg" alt="Project preview" />
    <h2 id="modalTitle"></h2>
    <p id="modalDesc"></p>
    <p id="modalMeta"></p>
  </div>
</div>

<!-- External projects data (recommended) -->
<script src="projects-data.js"></script>

<script>
/* --------------------------------------------------
   SAFETY FALLBACK
   If projects-data.js is missing or broken,
   define a default projects array so the page
   never crashes.
-------------------------------------------------- */
if (typeof projects === 'undefined') {
  console.warn('projects-data.js not found or invalid. Using fallback data.');
  var projects = [
    {
      title: 'Sample Night Flyer',
      category: 'poster',
      client: 'Demo Client',
      year: '2025',
      description: 'Sample project used as a fallback preview.',
      image: 'https://via.placeholder.com/600x400?text=Project+Image'
    }
  ];
}

const grid = document.getElementById('projectGrid');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modalImg');
const modalTitle = document.getElementById('modalTitle');
const modalDesc = document.getElementById('modalDesc');
const modalMeta = document.getElementById('modalMeta');

function render(filter = 'all') {
  grid.innerHTML = '';

  const filtered = projects.filter(p => filter === 'all' || p.category === filter);

  if (filtered.length === 0) {
    grid.innerHTML = '<p style="color:#777;text-align:center;width:100%">No projects found.</p>';
    return;
  }

  filtered.forEach(p => {
    const card = document.createElement('div');
    card.className = 'project';

    card.innerHTML = `
      <img src="${p.image}" alt="${p.title}">
      <div class="info">
        <span>${p.category.toUpperCase()} • ${p.year}</span>
        <h3>${p.title}</h3>
        <p>${p.client}</p>
      </div>`;

    card.addEventListener('click', () => {
      modal.classList.add('active');
      modalImg.src = p.image;
      modalTitle.textContent = p.title;
      modalDesc.textContent = p.description;
      modalMeta.textContent = `Client: ${p.client} • ${p.year}`;
    });

    grid.appendChild(card);
  });
}

// Initial render
render();

// Filter buttons
document.querySelectorAll('.filters button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filters button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    render(btn.dataset.filter);
  });
});

// Close modal
modal.addEventListener('click', () => modal.classList.remove('active'));
</script>
</body>
</html>
